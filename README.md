# Информационная система продажи автомобилей

## Основные функции

- Управление каталогом автомобилей (новых и подержанных)
- Ведение списка покупателей и их предпочтений
- Учет магазинов и их автомобилей
- Подбор автомобилей для покупателей
- Добавление автомобилей в избранное для авторизованных пользователей
- Калькулятор расчета стоимости импорта автомобилей
- Калькулятор расчета кредитных платежей и стоимости владения
- Оформление и учет продаж
- Статистика по рынку и соотношению спроса и предложения
- Разграничение прав доступа (администраторы и обычные пользователи)

## Технический стек

### Бэкенд
- Go (Golang)
- Gin (веб-фреймворк)
- GORM (ORM для работы с базой данных)
- SQLite (база данных)
- JWT (авторизация)
- bcrypt (хэширование паролей)

### Фронтенд
- React
- Material-UI (компоненты интерфейса)
- React Router (маршрутизация)
- Axios (HTTP-клиент)
- LocalStorage (хранение токенов авторизации)
   

### Шаги по запуску через докер:

1. Клонируйте репозиторий (если это еще не сделано):
```bash
git clone https://github.com/Sopirm/car_dealership_system
cd car_dealership_system
```

2. Запустите контейнеры:
```bash
docker-compose up -d
```

3. Приложение будет доступно по адресам:
   - Фронтенд: http://localhost
   - Бэкенд API: http://localhost:8080

### Остановка контейнеров:
```bash
docker-compose down
```

### Обновление после изменений:
```bash
docker-compose build
docker-compose up -d
```

## Структура проекта

- `/backend` - Бэкенд на Go
- `/frontend` - Фронтенд на React
- `/docker-compose.yml` - Конфигурация Docker Compose

### Бэкенд
- `main.go` - основная точка входа, настройка маршрутов API, модели данных, авторизация
- `calculator.go` - калькулятор для расчета стоимости импорта автомобилей и кредитных платежей
- `uploads/` - директория для хранения загруженных изображений автомобилей

### Фронтенд
- `src/components` - многократно используемые компоненты (шапка, футер и т.д.)
- `src/pages` - основные страницы приложения
- `src/services` - сервисы для работы с API
- `src/App.js` - компонент приложения с маршрутизацией

## Тестирование

Тестирование разработанной информационной системы автосалона проводилось с использованием Postman - инструмента для тестирования API. Для автоматизации процесса тестирования создана специальная коллекция тестов `postman_collection.json`, которая включает в себя набор запросов для проверки всех ключевых функций системы.

## API Endpoints

### Авторизация
- POST `/api/auth/login` - авторизация пользователя
- POST `/api/auth/register` - регистрация нового пользователя
- GET `/api/auth/check` - проверка действительности токена

### Автомобили
- GET `/api/cars` - получить список всех автомобилей
- GET `/api/cars/:id` - получить информацию о конкретном автомобиле
- POST `/api/admin/cars` - добавить новый автомобиль (только для администраторов)
- PUT `/api/admin/cars/:id` - обновить информацию об автомобиле (только для администраторов)
- DELETE `/api/admin/cars/:id` - удалить автомобиль (только для администраторов)
- GET `/api/cars/new` - получить список новых автомобилей
- GET `/api/cars/low-mileage` - получить список автомобилей с пробегом менее 30 000 км
- GET `/api/cars/most-expensive` - получить самый дорогой автомобиль

### Избранное
- GET `/api/user/favorites` - получить список избранных автомобилей пользователя
- POST `/api/user/favorites/:carId` - добавить автомобиль в избранное
- DELETE `/api/user/favorites/:carId` - удалить автомобиль из избранного
- GET `/api/user/favorites/:carId` - проверить, находится ли автомобиль в избранном

### Покупатели
- GET `/api/customers` - получить список всех покупателей
- GET `/api/customers/:id` - получить информацию о конкретном покупателе
- POST `/api/admin/customers` - добавить нового покупателя (только для администраторов)
- DELETE `/api/admin/customers/:id` - удалить покупателя (только для администраторов)
- GET `/api/customers/by-model` - получить покупателей по модели автомобиля
- GET `/api/customers/match-car/:carId` - найти покупателей для конкретного автомобиля

### Магазины
- GET `/api/shops` - получить список всех магазинов
- POST `/api/admin/shops` - добавить новый магазин (только для администраторов)

### Продажи
- GET `/api/admin/sales` - получить список всех продаж (только для администраторов)
- POST `/api/admin/sales` - оформить новую продажу (только для администраторов)

### Бренды и модели
- POST `/api/admin/brands` - добавить новый бренд (только для администраторов)
- POST `/api/admin/models` - добавить новую модель (только для администраторов)

### Калькулятор
- POST `/api/calculator/import` - рассчитать стоимость импорта автомобиля
- POST `/api/calculator/monthly-payment` - рассчитать ежемесячный платеж по кредиту
- POST `/api/calculator/total-cost` - рассчитать общую стоимость владения автомобилем

### Загрузка файлов
- POST `/api/upload` - загрузить изображение автомобиля

### Статистика
- GET `/api/market/ratio` - получить соотношение покупательной способности и стоимости автомобилей


## Безопасность

Система использует JWT-токены для авторизации и разграничения прав доступа:
- **Обычные пользователи** - имеют доступ только к просмотру информации
- **Администраторы** - имеют полный доступ к системе, включая создание, редактирование и удаление данных

Пароли пользователей хранятся в базе данных в виде хэшей с использованием алгоритма bcrypt. 
